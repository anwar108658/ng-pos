<div class="">
  <div class="p-2 py-5 w-full flex justify-end">
    <p-toast />
    <p-button
    (onClick)="[(isPopupOpen = true), this.customerForm.reset()]"
    label="Customer"
    size="small"
    variant="outlined"
      icon="pi pi-plus"
      />
    </div>
    
    <!-- Customer Form popUp -->
  <p-dialog
  [header]="isUpdate ? 'Update Customer' : 'Add Customer'"
  [modal]="true"
  closable="false"
  [(visible)]="isPopupOpen"
  [style]="{ width: '30rem' }"
  >
  <form
      [formGroup]="customerForm"
      (ngSubmit)="AddCustomer(customerForm)"
      class="mt-2 flex flex-col gap-3"
    >
    <div>
    </div>
    <div class="grid grid-cols-2 gap-3">
        <p-floatlabel class="flex-1" variant="on">
          <input
            class="w-full"
            pSize="small"
            pInputText
            id="on_title"
            formControlName="customerId"
            autocomplete="new-password"
          />
          <label for="on_title">Customer Id</label>
        </p-floatlabel>
        <p-floatlabel class="flex-1" variant="on">
          <input
            class="w-full"
            pSize="small"
            pInputText
            id="on_title"
            formControlName="name"
            autocomplete="off"
          />
          <label for="on_title">Customer Name</label>
        </p-floatlabel>
        <p-floatlabel class="flex-1" variant="on">
          <p-inputmask fluid mask="(99) 999-999999" formControlName="phone" size="small" placeholder="(92) 999-999999" />
          <label for="on_title">Phone</label>
        </p-floatlabel>
        <p-floatlabel class="flex-1" variant="on">
          <input
            class="w-full"
            pSize="small"
            pInputText
            id="on_title"
            formControlName="email"
            autocomplete="off"
          />
          <label for="on_title">Email</label>
        </p-floatlabel>
      </div>
      <div class="mt-4 flex gap-2 justify-between">
        <div class="flex gap-2">
          <p-button
            (onClick)="this.customerForm.reset()"
            [disabled]="isUpdate"
            variant="outlined"
            severity="warn"
            label="Reset"
            icon="pi pi-undo"
            size="small"
          />
          <p-button
            type="submit"
            variant="outlined"
            severity="primary"
            [label]="isUpdate ? 'Update' : 'Add'"
            [icon]="isUpdate ? 'pi pi-save' : 'pi pi-plus'"
            size="small"
          />
        </div>
        <div>
          <p-button
            (onClick)="this.formClose()"
            variant="outlined"
            severity="danger"
            label="Close"
            size="small"
          />
        </div>
      </div>
    </form>
  </p-dialog>

  <!-- data Table -->
  <table
    [class.bg-gray-900]="this.productSetting.darkMode()"
    class="w-[98%] mx-auto rounded-lg overflow-hidden"
  >
    <thead
      [class.bg-gray-800]="this.productSetting.darkMode()"
      [class.text-gray-300]="this.productSetting.darkMode()"
      class="bg-gray-100"
    >
      <tr  [className]="this.productSetting.darkMode()?'text-gray-300':'text-gray-700'">
        <th class="px-4 py-2 text-left text-sm font-semibold">Id</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Name</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Phone</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Email</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Action</th>
      </tr>
    </thead>
  
    <tbody>
      @for (p of customers; track p; let i = $index) {
      <tr
        [class.hover:bg-gray-800]="this.productSetting.darkMode()"
        [class.border-y-gray-700]="this.productSetting.darkMode()"
        class="hover:bg-gray-50 border-y border-gray-300"
      >
        <td class="px-4 py-1 text-[.8rem]">{{ p.customerId }}</td>
        <td class="px-4 py-1 text-[.8rem]">{{ p.name }}</td>
        <td class="px-4 py-1 text-[.8rem]">{{ p.phone }}</td>
        <td class="px-4 py-1 text-[.8rem]">{{ p.email }}</td>
        <td class="px-4 py-1 text-[.8rem] flex gap-2">
          <p-button
            (onClick)="editProduct(p, p.customerId)"
            severity="help"
            [variant]="this.productSetting.darkMode() ? 'text' : 'outlined'"
            icon="pi pi-pencil"
            size="small"
            styleClass="p-1"
          />
          <p-button
            (onClick)="deleteProduct(p.customerId)"
            severity="danger"
            [variant]="this.productSetting.darkMode() ? 'text' : 'outlined'"
            icon="pi pi-trash"
            size="small"
            styleClass="p-1"
          />
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>

